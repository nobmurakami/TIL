# PHP基礎
※主にRubyと違う点や、Rubyでもできるかもしれないけど自分が知らないことについて書く。

## PHPの書き方
- PHPはHTMLに埋め込んで使うことができる
- `<?php 〜 ?>`の中にPHPの命令を書く
- ファイルがPHPコードのみである場合はファイルの最後の終了タグ`?>`は省略することを推奨されている。終了タグの後に余分な空白や改行があると、予期せぬ挙動を引き起こす場合があるため。
- 文末にセミコロン「`;`」を入力する。ないとエラー
- ただし、PHPのコードを１行で書く場合はセミコロンを省略することができる
- コメントアウトは`//`。行末までがコメントになる

## 文字列の出力
- `echo`という命令で文字列を出力する
- `echo`で計算結果を出力することも可能
- `<?php echo`は`<?=`と短縮して書くこともできる
- 改行には`PHP_EOL`を使用する

## 変数
- 変数名には頭に`$`が必要
- 変数名に複数単語を使う場合はローワーキャメルケースで書く
- 変数に数値を足す際、値が1の時だけ、`++`と省略して書ける。`++`を変数の前に書くとその行の命令が実行される前に足され、変数の後に書くとその行の命令が実行される後に足される。
- 1だけ引く場合は`--`

## 文字列の連結
- ドット「`.`」で文字列を連結できる
- 「`.=`」を使うと変数と文字列の連結を省略して書くことができる
- ダブルクオーテーションで文字列を囲んだ場合、中の変数を`{}`で囲むと変数展開できる
- ダブルクオーテーションと式展開で連結するより、シングルクオーテーションと「.」の連結の方が処理が早い

## if文
- if文は次のように書く
```PHP
if ($x > 10) {
  //処理
}
```
- `else`、`elseif`
```PHP
if ($x > 10) {
  //処理
} elseif ($x > 0) {
  //処理
} else {
  //処理
}
```

## 条件の否定
- if文の条件を`!(条件)`と書くと条件の否定ができる

## switch文
- if, elseifによる分岐が多くなる場合はswitch文で書き換えた方が読みやすい
- `break`命令がないと後ろに続く`case`ブロックも続けて実行されるので注意
```PHP
switch ($coin) {
  case 0:
    echo '表';
    break;
  case 1:
    echo '裏';
    break;
  default:
    echo 'エラー';
    break;
}
```

## 配列
- 配列の基本構文は「`$配列名 = array(値１, 値2, ・・・);`」
- 配列の短縮構文「`$配列名 = [値１, 値2, ・・・];`」
- 配列の末尾に値を追加する時は「`$配列名[] = 値;`」
- 配列のインデックス番号で要素を取り出す場合はRubyと同じく`$配列名[0]`だが、最後の要素を取得する時に`[-1]`は使えない

## 連想配列
- Rubyで言うハッシュ
- 次のように定義する
```PHP
$user = array(
  'name' => '太郎',
  'age' => 10
  );
```
- 値を取り出すには「`$配列名[キー]`」

##  繰り返し処理

### for文
- for文を使って1〜100まで出力する
```PHP
for ($i = 1; $i <= 100; $i++) {
  echo $i;
}
```
- for (変数の初期化; ループの条件; 変数の更新)
- 繰り返し処理で`echo`する時に改行する時は、`echo $i.'<br>';`のように書く

### while文
- while文で1〜100まで出力する
```PHP
$i = 1;
while ($i <= 100) {
  echo $i;
  $i++;
}
```
- for文と違い、変数の初期化と変数の更新は()の中に書かない

### break文
- 繰り返し処理を止める場合は`break;`を記述する

### continue文
- ループそのものを完全に抜けてしまう`break`文に対して、`continue`文は現在の周だけをスキップし、ループそのものは継続して実行する

### foreach文
- 配列または連想配列に対して、先頭のデータから順に繰り返し処理を行う命令
- 「`foreach (配列 as 値変数)`」のように書く
- 「`foreach (配列 as キー変数 => 値変数)`」と、キー変数を記述すると、配列の時はインデックス番号が、連想配列の時はキーがキー変数に代入される。

## 関数
- `関数名(引数1, 引数2 … )`で関数を使うことができる
- 引数がない場合でも()は必須なので注意

### 組み込み関数の例
- `strlen`は引数に入れた文字列の文字数を返す
- `count`は配列の要素の数を返す
- `rand`は第一引数と第二引数の間のランダムな整数を返す

### 関数を自作する
- 関数の作り方
```PHP
function 関数名(仮引数) {
  処理
}
```
- 関数の戻り値を指定するには`return`を使う

## ブラウザに表示する方法
### ビルトインサーバーを立ち上げる
- 下記のコマンドでPHPにもともと入っているWebサーバーの機能が起動する
```
$ php -S localhost:8080 -t <ドキュメントルートのパス>
```
- index.phpが存在するディレクトリで上記コマンドを実行する場合、-t以降は不要
